{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createMarkup(arrImg) {\n    return arrImg\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=${largeImageURL}>\n     <img \n     class=\"gallery-image\" \n    src=\"${webformatURL}\" \n    alt=\"${tags}\"/>\n   <ul class=\"box-list\">\n     <li>\n      <h2 class=\"box-title\">Likes</h2>\n       <p class=\"box-text\">${likes}</p>\n       </li>\n      <li>\n      <h2 class=\"box-title\">Views</h2>\n      <p class=\"box-text\">${views}</p>\n      </li>\n      <li class=\"box-item\">\n      <h2 class=\"box-title\">Comments</h2>\n      <p class=\"box-text\">${comments}</p>\n      </li>\n      <li class=\"box-item\">\n      <h2 class=\"box-title\">Downloads</h2>\n      <p class=\"box-text\">${downloads}</p>\n      </li>\n      </ul>\n      </a>\n      </li>`\n      )\n      .join('');\n  }\n  ","import axios from 'axios';\n// https://pixabay.com/api/?key=43264129-0a20e73c7f6f9c0a58d1fd1ca&q=dog&image_type=photo&orientation=horizontal&safesearch=true\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '43264129-0a20e73c7f6f9c0a58d1fd1ca';\n\n\nexport async function makeRequest(inputEl, page) {\n  try {\n    const response = await axios.get(`${BASE_URL}`, {\n      params: {\n        key: API_KEY,\n        q: `${inputEl}`,\n        imege_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    alert(error);\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { createMarkup } from './js/render-functions';\nimport { makeRequest } from './js/pixabay-api';\n\nconst searchEl = document.querySelector('form');\nconst ulEl = document.querySelector('ul');\nconst loaderEl = document.querySelector('.loader');\nconst btnMore = document.querySelector('.btn');\n\n\n\nlet inputEl = '';\nlet page = 1;\nlet deltaPage;\n\nbtnMore.style.display = 'none';\nloaderEl.style.display = 'none';\n \nsearchEl.addEventListener('submit', handleSubmit);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  const form = event.target;\n page = 1;\n  inputEl = form.elements.imgName.value;\n  console.log(inputEl);\n  if (inputEl === '') {\n    iziToast.show({\n      message: ' Field must be filled! ',\n      position: 'topRight',\n      backgroundColor: 'red',\n      messageColor: '#FFFFFF',\n      transitionIn: 'fadeln',\n      timeout: 4000,\n    });\n    return;\n  }\n\n  loaderEl.style.display = 'block';\n\n\n  try {\n    const data = await makeRequest(inputEl, page);\n    console.log(data.hits);\n\n    // loaderEl.style.display = 'none';\n    if (data.hits.length === 0) {\n      iziToast.show({\n        message:\n          ' Sorry, there are no images matching your search query. Please try again! ',\n        position: 'topRight',\n        backgroundColor: 'red',\n        messageColor: '#FFFFFF',\n        transitionIn: 'fadeln',\n        timeout: 4000,\n      });\n      loaderEl.style.display = 'none';\n      btnMore.style.display = 'none';\n      ulEl.innerHTML = '';\n      form.reset();\n      return;\n    }\n    loaderEl.style.display = 'none';\n    ulEl.innerHTML = createMarkup(data.hits);\n    btnMore.style.display = 'block';\n    deltaPage = Math.ceil(data.totalHits / data.hits.length);\n    if (page >= deltaPage){\n      btnMore.style.display = 'none'\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: 'green',\n        messageColor: '#FFFFFF',\n        transitionIn: 'fadeln',\n        timeout: 4000,\n      });\n    }\n    // console.log(ulEl);\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n    form.reset();\n  } catch (error) {\n    alert(error);\n  }\n}\nbtnMore.addEventListener('click', handleClick);\n\nasync function handleClick() {\n  btnMore.style.display = 'none';\n  loaderEl.style.display = 'block';\n  page += 1;\n\n  try {\n    const data = await makeRequest(inputEl, page);\n    console.log(data.hits.length);\n    loaderEl.style.display = 'none';\n    ulEl.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n    btnMore.style.display = 'block'; //console.log(page);\n    if (page >= deltaPage) {\n      btnMore.style.display = 'none';\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        backgroundColor: 'green',\n        messageColor: '#FFFFFF',\n        transitionIn: 'fadeln',\n        timeout: 4000,\n      });\n    }\n\n    const card = document.querySelector('.gallery-link');\n    const cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n  } catch (error) {\n    alert(error);\n  }\n}\n"],"names":["createMarkup","arrImg","webformatURL","largeImageURL","tags","likes","views","comments","downloads","BASE_URL","API_KEY","makeRequest","inputEl","page","axios","error","searchEl","ulEl","loaderEl","btnMore","deltaPage","handleSubmit","event","form","iziToast","data","SimpleLightbox","handleClick","cardHeight"],"mappings":"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"}